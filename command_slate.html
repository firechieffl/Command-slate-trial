
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Command Slate">
<title>Command Slate</title>
<style>
  :root {
    --bg: #0b0e11;
    --panel: #121720;
    --accent: #ff7a18;
    --ok: #38b000;
    --warn: #ffb703;
    --bad: #ef233c;
    --text: #e6edf3;
    --muted: #9fb3c8;
  }
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
  }
  header {
    padding: 14px 16px;
    background: linear-gradient(180deg, #141a24, #0b0e11);
    position: sticky; top: 0; z-index: 10;
    border-bottom: 1px solid #1e2533;
  }
  header h1 { margin: 0; font-size: 18px; letter-spacing: .5px; }
  header .timer { font-variant-numeric: tabular-nums; color: var(--accent); float: right; }

  main { padding: 12px; }
  .card {
    background: var(--panel);
    border: 1px solid #1e2533;
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
  }
  .card h2 { margin: 0 0 8px; font-size: 14px; color: var(--muted); }

  .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
  .grid-3 { grid-template-columns: repeat(3, 1fr); }
  .grid-4 { grid-template-columns: repeat(4, 1fr); }

  .btn {
    padding: 12px 10px;
    border-radius: 10px;
    border: 1px solid #243049;
    background: #0f1420;
    color: var(--text);
    text-align: center;
    font-size: 14px;
    user-select: none;
  }
  .btn.active { background: #1b2438; border-color: var(--accent); }
  .btn.ok.active { border-color: var(--ok); }
  .btn.warn.active { border-color: var(--warn); }
  .btn.bad.active { border-color: var(--bad); }

  .tiles { display: flex; gap: 8px; flex-wrap: wrap; }
  .tile {
    padding: 10px 12px;
    border-radius: 10px;
    background: #0f1420;
    border: 1px solid #243049;
    min-width: 120px;
  }
  .tile small { color: var(--muted); display: block; }

  .timeline { display: grid; grid-template-columns: 1fr auto; gap: 6px; }
  .timeline button { padding: 10px; }

  .mode {
    display: flex; gap: 8px;
  }
  .mode .btn { flex: 1; }

  footer {
    position: sticky; bottom: 0;
    background: #0b0e11;
    border-top: 1px solid #1e2533;
    padding: 10px;
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
  }
  footer button {
    padding: 14px 10px;
    border-radius: 12px;
    border: 1px solid #243049;
    background: #111827;
    color: var(--text);
    font-size: 14px;
  }
</style>
</head>
<body>

<header>
  <h1>Command Slate <span class="timer" id="timer">00:00</span></h1>
</header>

<main>
  <section class="card">
    <h2>Size-Up</h2>
    <div class="grid">
      <div class="btn" data-group="occ">Residential</div>
      <div class="btn" data-group="occ">Multi-Res</div>
      <div class="btn" data-group="occ">Commercial</div>
      <div class="btn" data-group="occ">Industrial</div>
    </div>
    <div class="grid grid-5"></div>
    <div class="grid grid-3" style="margin-top:8px;">
      <div class="btn" data-group="const">Type I</div>
      <div class="btn" data-group="const">Type III</div>
      <div class="btn" data-group="const">Type V</div>
    </div>
    <div class="grid grid-3" style="margin-top:8px;">
      <div class="btn warn" data-group="cond">Smoke</div>
      <div class="btn bad" data-group="cond">Fire</div>
      <div class="btn bad" data-group="cond">Heavy Fire</div>
    </div>
    <div class="grid grid-3" style="margin-top:8px;">
      <div class="btn" data-group="life">Low Life Hazard</div>
      <div class="btn warn" data-group="life">Possible</div>
      <div class="btn bad" data-group="life">Confirmed</div>
    </div>
  </section>

  <section class="card">
    <h2>Companies</h2>
    <div class="tiles" id="tiles">
      <div class="tile"><strong>E1</strong><small>Fire Attack</small><small id="par1">PAR: —</small></div>
      <div class="tile"><strong>T2</strong><small>Primary Search</small><small id="par2">PAR: —</small></div>
      <div class="tile"><strong>E3</strong><small>RIT</small><small id="par3">PAR: —</small></div>
    </div>
  </section>

  <section class="card">
    <h2>Benchmarks</h2>
    <div class="timeline">
      <button onclick="stamp('Water on Fire')">Water on Fire</button><span id="b1">—</span>
      <button onclick="stamp('Primary Search')">Primary Search</button><span id="b2">—</span>
      <button onclick="stamp('Secondary Search')">Secondary Search</button><span id="b3">—</span>
      <button onclick="stamp('PAR')">PAR</button><span id="b4">—</span>
    </div>
  </section>

  <section class="card">
    <h2>Risk Mode</h2>
    <div class="mode">
      <div class="btn ok" onclick="setMode('Normal')">Normal</div>
      <div class="btn warn" onclick="setMode('Marginal')">Marginal</div>
      <div class="btn bad" onclick="setMode('Defensive')">Defensive</div>
    </div>
    <p id="modeText" style="margin-top:8px;color:var(--muted);">Mode: Normal</p>
  </section>
</main>

<footer>
  <button onclick="resetIncident()">Reset</button>
  <button onclick="exportLog()">Export Log</button>
  <button onclick="alert('Offline-ready. Add to Home Screen.')">Help</button>
</footer>

<script>
let start = Date.now();
let log = [];
setInterval(() => {
  const s = Math.floor((Date.now() - start) / 1000);
  const m = String(Math.floor(s/60)).padStart(2,'0');
  const r = String(s%60).padStart(2,'0');
  document.getElementById('timer').textContent = m + ':' + r;
}, 1000);

document.querySelectorAll('.btn[data-group]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll(`.btn[data-group="${btn.dataset.group}"]`).forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    log.push({ t: Date.now(), action: btn.textContent });
  });
});

function stamp(name){
  const time = document.getElementById('timer').textContent;
  const slot = [...document.querySelectorAll('[id^=b]')].find(s => s.textContent === '—');
  if(slot) slot.textContent = time;
  log.push({ t: Date.now(), action: name, time });
}

function setMode(mode){
  document.getElementById('modeText').textContent = 'Mode: ' + mode;
  log.push({ t: Date.now(), action: 'Mode ' + mode });
}

function exportLog(){
  const text = log.map(e => new Date(e.t).toLocaleTimeString() + ' — ' + e.action + (e.time ? ' @ '+e.time : '')).join('\n');
  const blob = new Blob([text], {type:'text/plain'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'command_slate_log.txt';
  a.click();
}

function resetIncident(){
  if(confirm('Reset incident?')){
    start = Date.now();
    document.querySelectorAll('[id^=b]').forEach(s => s.textContent='—');
    log = [];
  }
}
</script>
</body>
</html>
